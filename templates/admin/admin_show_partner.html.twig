{% extends 'base.html.twig' %}

{% block title %}Partenaire{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('build/adminNavBar.css') }}">
    <link rel="stylesheet" href="{{ asset('build/partner.css') }}">
{% endblock%}

{% block javascripts %}
    {{ encore_entry_script_tags('adminNavBar') }}
    {{ encore_entry_script_tags('partner') }}
    {{ encore_entry_script_tags('bootstrap') }}
{% endblock%}

{% block body %}
    {% include 'Partials/_admin_navBar.html.twig' %}

<div class="main-container">
    <h2>Partenaire - {{ partner.name}} </h2>


    <div class="infos-div white-card">
        <div class="info-partner">
            <h3>Informations</h3>
            <div>
            <p>Nom du partenaire : {{ partner.name }}</p>
            <p>Statut : {% if partner.user.isActive == 1%}activé
                {% elseif partner.user.isActive == 0%}désactivé
                {% endif %}</p>
            <p>Nombre de structures : {{ partner.structures|length }}</p>
            </div>
        </div>
        <div class="partner-btns">
        {% if partner.user.isActive == true %}
            <a href="{{ path('app_admin_enable_user', {id: partner.user.id }) }}" class="btn btn-primary">Désactiver</a>
        {% elseif partner.user.isActive == false %}
            <a href="{{ path('app_admin_enable_user', {id: partner.user.id }) }}" class="btn btn-success">Activer</a>
        {% endif %}
        <a href="#" class="btn btn-danger">Supprimer</a>
        </div>
    </div>

    <div class="permissions-div white-card">

        <h3>Permissions globales</h3>
        <div class="form-permissions">
            <form id="permissions-modify" class="container" method="post">
        {{ form_start(partnerPermissionsForm) }}
        {{ form_row(partnerPermissionsForm.permissions.newsletter) }}
        {{ form_row(partnerPermissionsForm.permissions.planning_management) }}
        {{ form_row(partnerPermissionsForm.permissions.drink_sales) }}
        {{ form_row(partnerPermissionsForm.permissions.video_courses) }}
        {{ form_row(partnerPermissionsForm.permissions.prospect_reminders) }}
        {{ form_row(partnerPermissionsForm.permissions.sponsorship) }}
        {{ form_row(partnerPermissionsForm.permissions.free_wifi) }}
        {{ form_row(partnerPermissionsForm.permissions.flexible_hours) }}
                <button type="submit" class="btn" id="submit-form">Enregistrer les modifications</button>
        {{ form_end(partnerPermissionsForm) }}
            </form>
            <button type="button" class="btn btn-primary" id="open-modal" >Enregistrer les modifications</button>
        </div>
    </div>

    <!-- The Modal -->
    <div id="confirm-modal" class="confirm-modal">
        <!-- Modal content -->
        <div class="modal-buttons">
            <span class="closing"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <p>Etes-vous sûr de vouloir modifier les permissions globales du partenaire? </p>
            <div>
                <button class="btn btn-primary">Annuler</button>
                <button class="btn btn-success" id="confirm-btn">Confirmer</button>
            </div>
        </div>
    </div>

    <div class="structures-div white-card">
        <h3>Structures</h3>
        {% for structure in structures %}
            <div>
                <h3>{{ structure.address }}</h3>
                <p>{{ structure.address }}</p>
                <p>{{ structure.zipcode }}</p>
                <p>{{ structure.city }}</p>
                <a href="{{ path('app_admin_show_structure', {slug: structure.slug }) }}">Voir la fiche de la structure</a>
            </div>
            
        {% endfor %}
    </div>
</div>
{% endblock %}
